<!DOCTYPE html>
<html xmlns:fb="http://www.facebook.com/2008/fbml" xmlns:g="urn:g">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="keywords" content="">
  <meta name="description" content="Blog about hackings and development | A Plan to Read the Ruby Standard Library">
  <title>A Plan to Read the Ruby Standard Library | 杨晨昀 Steven Yang</title>
  <link rel="stylesheet" href="/stylesheets/screen.css">
  <!--[if lt IE 9]>
    <script src="/javascripts/html5.js"></script>
  <![endif]-->
</head>

<body>
  <div class="wrap">
    <div id="sidebar" class="side group clear">
      <header>
        <a href="/">Steven Yang</a>
      </header>
      <nav>
        <ul>
          <li><a href="/about/">About</a></li>
          <li><a href="/contact/">Contact</a></li>
        </ul>

<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
  <div>
    <a class="addthis_button_facebook_like" fb:like:width="46px"></a>
    <a class='addthis_button_google_plusone' g:plusone:size='small' g:plusone:annotation='none'></a>
    <br class="clear">
  </div>
  <div>
    <a class="addthis_button_douban"></a>
    <a class="addthis_button_sinaweibo"></a>
    <a class="addthis_button_twitter"></a>
    <br class="clear">
  </div>
</div>
<!-- AddThis Button END -->


    </div>
    <div class="content">
      <article class="post">
  <header id="post-title">
    <h1>A Plan to Read the Ruby Standard Library</h1>
  </header>
  <div id="post-stats">
    <p>Posted on May  3, 2013</p>
  </div>
  <div id="post-content">
    <ul id="markdown-toc">
  <li><a href="#why-bother-reading-the-source-code">Why Bother Reading the Source Code?</a></li>
  <li><a href="#resources">Resources</a></li>
  <li><a href="#work-of-load">Work of Load</a></li>
  <li><a href="#goals-and-plans">Goals and Plans</a></li>
  <li><a href="#track-of-my-studies">Track of My Studies</a></li>
</ul>

<h2 id="why-bother-reading-the-source-code">Why Bother Reading the Source Code?</h2>
<p>For the past two years, I’ve built the skill to craft software with various frameworks and tools. To move forward, I need to have more control over the system, the language and the libraries I work with. Merely reading the documentation doesn’t fulfil this requirement.</p>

<p>For any craftmanship, learning from the masterpiece is always a good way to improve one’s skills. Writers make improvement by reading other writers’ work, so should us - coders.</p>

<p>Inspired by <a href="http://blog.rubybestpractices.com/posts/gregory/005-code-reading-stdlib.html">this</a> <a href="http://on-ruby.blogspot.jp/2009/05/questions-five-ways-code-reading.html">two</a> articles, I decided to read all the source code of ruby standard libraries in the next four months.</p>

<p>It might be hard to begin with - lots of unknown idioms, unknown concepts and large code bases - but if I survive, I will improve the ability to dive into the source code directly and make sense out of it. This skill will help me become a better programmer in the future.</p>

<h2 id="resources">Resources</h2>

<p>Most of the studies will take place in the <a href="https://github.com/ruby/ruby/tree/ruby_1_9_3"><code>ruby 1.9.3</code></a> source code.  I decided to read 1.9.3 instead of 2.0 because most of my work still runs in 1.9.3 that and it would be living for a while. It would be good I could adapt what I’ve learned into my work quickly.</p>

<p>I decided to leave out some of the <a href="https://bugs.ruby-lang.org/projects/ruby/wiki/StdlibGem">‘default gems’</a> in the ruby trunk as they have either an indenpedent or a large code base and deserve dedicate attention in the future. So are some domain-specific parser or gui libraries such as <code>psych</code>, <code>rexml</code>, <code>rss</code>, <code>tk</code> and <code>tkextlib</code>.</p>

<p>Along the way, <a href="https://github.com/rubyspec/rubyspec"><code>ruby-spec</code></a> and <a href="http://www.amazon.com/Programming-Ruby-1-9-Pragmatic-Programmers/dp/1934356085">Programming Ruby</a> will be the guide book to help me dive in the source code.</p>

<h2 id="work-of-load">Work of Load</h2>
<p>Leaving out the complex libraries or gems, there are <strong>92 libraries</strong> I need to study in. </p>

<p>I calculated the total lines of code I needed to go through…</p>

<pre><code>cloc --not-match-f='^(tk|psych).+' --exclude-dir=psych,rake,rubygems,rdoc,rexml,tk,tkextlib,rss .
</code></pre>

<p>…and get 287 files, 51770 locs, 15160 effective lines of code(loc).</p>

<pre><code>287 text files.
287 unique files.
731 files ignored.

http://cloc.sourceforge.net v 1.56  T=2.0 s (141.5 files/s, 44190.0 lines/s)
-------------------------------------------------------------------------------
Language                     files          blank        comment           code
-------------------------------------------------------------------------------
Ruby                           283           9649          26961          51770
-------------------------------------------------------------------------------
SUM:                           283           9649          26961          51770
-------------------------------------------------------------------------------
</code></pre>

<p>To be more specific, I want to know every files I also listed all the files I needed to go through with:</p>

<pre><code>tree -I 'x86_64-darwin12.3.0|psych*|rake|rubygems|rdoc|rexml|tk*|rss' --prune
</code></pre>

<p>…and it come out with <a href="#track-of-my-studies">this list</a>.</p>

<h2 id="goals-and-plans">Goals and Plans</h2>
<p>I want to finish this study in 120 days, from <code>Fri, 03 May 2013</code> - <code>Sat, 31 Aug 2013</code>.  That means I need to go through around 450 locs every day, might take me 1 to 2 hours to finish this work.</p>

<p>Reading is also about quality and understanding, so for each library I will:</p>

<ul>
  <li>write some example code to use this library</li>
  <li>do researches about unique techniques I found within the source code</li>
</ul>

<p>All learning progress will be recorded here.</p>

<h2 id="track-of-my-studies">Track of My Studies</h2>

<pre><code>[ ] ├── English.rb
[x] ├── abbrev.rb
[ ] ├── base64.rb
[ ] ├── benchmark.rb
[ ] ├── bigdecimal
[ ] │   ├── jacobian.rb
[ ] │   ├── ludcmp.rb
[ ] │   ├── math.rb
[ ] │   ├── newton.rb
[ ] │   └── util.rb
[ ] ├── cgi
[ ] │   ├── cookie.rb
[ ] │   ├── core.rb
[ ] │   ├── html.rb
[ ] │   ├── session
[ ] │   │   └── pstore.rb
[ ] │   ├── session.rb
[ ] │   └── util.rb
[ ] ├── cgi.rb
[ ] ├── cmath.rb
[ ] ├── complex.rb
[ ] ├── count
[ ] ├── csv.rb
[ ] ├── date
[ ] │   └── format.rb
[ ] ├── date.rb
[ ] ├── debug.rb
[ ] ├── delegate.rb
[ ] ├── digest
[ ] │   ├── hmac.rb
[ ] │   └── sha2.rb
[ ] ├── digest.rb
[ ] ├── dl
[ ] │   ├── callback.rb
[ ] │   ├── cparser.rb
[ ] │   ├── func.rb
[ ] │   ├── import.rb
[ ] │   ├── pack.rb
[ ] │   ├── stack.rb
[ ] │   ├── struct.rb
[ ] │   ├── types.rb
[ ] │   └── value.rb
[ ] ├── dl.rb
[ ] ├── drb
[ ] │   ├── acl.rb
[ ] │   ├── drb.rb
[ ] │   ├── eq.rb
[ ] │   ├── extserv.rb
[ ] │   ├── extservm.rb
[ ] │   ├── gw.rb
[ ] │   ├── invokemethod.rb
[ ] │   ├── observer.rb
[ ] │   ├── ssl.rb
[ ] │   ├── timeridconv.rb
[ ] │   └── unix.rb
[ ] ├── drb.rb
[ ] ├── e2mmap.rb
[ ] ├── erb.rb
[ ] ├── expect.rb
[ ] ├── fiddle
[ ] │   ├── closure.rb
[ ] │   └── function.rb
[ ] ├── fiddle.rb
[ ] ├── fileutils.rb
[ ] ├── find.rb
[ ] ├── forwardable.rb
[ ] ├── getoptlong.rb
[ ] ├── gserver.rb
[ ] ├── io
[ ] │   └── console
[ ] │       └── size.rb
[ ] ├── ipaddr.rb
[ ] ├── irb
[ ] │   ├── cmd
[ ] │   │   ├── chws.rb
[ ] │   │   ├── fork.rb
[ ] │   │   ├── help.rb
[ ] │   │   ├── load.rb
[ ] │   │   ├── nop.rb
[ ] │   │   ├── pushws.rb
[ ] │   │   └── subirb.rb
[ ] │   ├── completion.rb
[ ] │   ├── context.rb
[ ] │   ├── ext
[ ] │   │   ├── change-ws.rb
[ ] │   │   ├── history.rb
[ ] │   │   ├── loader.rb
[ ] │   │   ├── math-mode.rb
[ ] │   │   ├── multi-irb.rb
[ ] │   │   ├── save-history.rb
[ ] │   │   ├── tracer.rb
[ ] │   │   ├── use-loader.rb
[ ] │   │   └── workspaces.rb
[ ] │   ├── extend-command.rb
[ ] │   ├── frame.rb
[ ] │   ├── help.rb
[ ] │   ├── init.rb
[ ] │   ├── input-method.rb
[ ] │   ├── inspector.rb
[ ] │   ├── lc
[ ] │   │   ├── error.rb
[ ] │   │   ├── help-message
[ ] │   │   └── ja
[ ] │   │       ├── encoding_aliases.rb
[ ] │   │       ├── error.rb
[ ] │   │       └── help-message
[ ] │   ├── locale.rb
[ ] │   ├── magic-file.rb
[ ] │   ├── notifier.rb
[ ] │   ├── output-method.rb
[ ] │   ├── ruby-lex.rb
[ ] │   ├── ruby-token.rb
[ ] │   ├── slex.rb
[ ] │   ├── src_encoding.rb
[ ] │   ├── version.rb
[ ] │   ├── workspace.rb
[ ] │   ├── ws-for-case-2.rb
[ ] │   └── xmp.rb
[ ] ├── irb.rb
[ ] ├── json
[ ] │   ├── add
[ ] │   │   ├── complex.rb
[ ] │   │   ├── core.rb
[ ] │   │   └── rational.rb
[ ] │   ├── common.rb
[ ] │   ├── ext.rb
[ ] │   └── version.rb
[ ] ├── json.rb
[ ] ├── kconv.rb
[ ] ├── logger.rb
[ ] ├── mathn.rb
[ ] ├── matrix
[ ] │   ├── eigenvalue_decomposition.rb
[ ] │   └── lup_decomposition.rb
[ ] ├── matrix.rb
[ ] ├── minitest
[ ] │   ├── autorun.rb
[ ] │   ├── benchmark.rb
[ ] │   ├── mock.rb
[ ] │   ├── pride.rb
[ ] │   ├── spec.rb
[ ] │   └── unit.rb
[ ] ├── mkmf.rb
[ ] ├── monitor.rb
[ ] ├── multi-tk.rb
[ ] ├── mutex_m.rb
[ ] ├── net
[ ] │   ├── ftp.rb
[ ] │   ├── http.rb
[ ] │   ├── https.rb
[ ] │   ├── imap.rb
[ ] │   ├── pop.rb
[ ] │   ├── protocol.rb
[ ] │   ├── smtp.rb
[ ] │   └── telnet.rb
[ ] ├── observer.rb
[ ] ├── open-uri.rb
[ ] ├── open3.rb
[ ] ├── openssl
[ ] │   ├── bn.rb
[ ] │   ├── buffering.rb
[ ] │   ├── cipher.rb
[ ] │   ├── config.rb
[ ] │   ├── digest.rb
[ ] │   ├── ssl-internal.rb
[ ] │   ├── ssl.rb
[ ] │   ├── x509-internal.rb
[ ] │   └── x509.rb
[ ] ├── openssl.rb
[ ] ├── optparse
[ ] │   ├── date.rb
[ ] │   ├── shellwords.rb
[ ] │   ├── time.rb
[ ] │   ├── uri.rb
[ ] │   └── version.rb
[ ] ├── optparse.rb
[ ] ├── ostruct.rb
[ ] ├── pathname.rb
[ ] ├── pp.rb
[ ] ├── prettyprint.rb
[ ] ├── prime.rb
[ ] ├── profile.rb
[ ] ├── profiler.rb
[ ] ├── pstore.rb
[ ] ├── racc
[ ] │   └── parser.rb
[ ] ├── rake.rb
[ ] ├── rational.rb
[ ] ├── rbconfig
[ ] │   ├── datadir.rb
[ ] │   └── obsolete.rb
[ ] ├── rdoc.rb
[ ] ├── remote-tk.rb
[ ] ├── resolv-replace.rb
[ ] ├── resolv.rb
[ ] ├── rinda
[ ] │   ├── rinda.rb
[ ] │   ├── ring.rb
[ ] │   └── tuplespace.rb
[ ] ├── ripper
[ ] │   ├── core.rb
[ ] │   ├── filter.rb
[ ] │   ├── lexer.rb
[ ] │   └── sexp.rb
[ ] ├── ripper.rb
[ ] ├── rss.rb
[ ] ├── rubygems.rb
[ ] ├── scanf.rb
[ ] ├── securerandom.rb
[ ] ├── set.rb
[ ] ├── shell
[ ] │   ├── builtin-command.rb
[ ] │   ├── command-processor.rb
[ ] │   ├── error.rb
[ ] │   ├── filter.rb
[ ] │   ├── process-controller.rb
[ ] │   ├── system-command.rb
[ ] │   └── version.rb
[ ] ├── shell.rb
[ ] ├── shellwords.rb
[ ] ├── singleton.rb
[ ] ├── socket.rb
[ ] ├── syck
[ ] │   ├── baseemitter.rb
[ ] │   ├── basenode.rb
[ ] │   ├── constants.rb
[ ] │   ├── encoding.rb
[ ] │   ├── error.rb
[ ] │   ├── loader.rb
[ ] │   ├── rubytypes.rb
[ ] │   ├── stream.rb
[ ] │   ├── stringio.rb
[ ] │   ├── syck.rb
[ ] │   ├── tag.rb
[ ] │   ├── types.rb
[ ] │   ├── yamlnode.rb
[ ] │   └── ypath.rb
[ ] ├── syck.rb
[ ] ├── sync.rb
[ ] ├── tags
[ ] ├── tcltk.rb
[ ] ├── tempfile.rb
[ ] ├── test
[ ] │   ├── unit
[ ] │   │   ├── assertions.rb
[ ] │   │   ├── parallel.rb
[ ] │   │   └── testcase.rb
[ ] │   └── unit.rb
[ ] ├── thread.rb
[ ] ├── thwait.rb
[ ] ├── time.rb
[ ] ├── timeout.rb
[ ] ├── tmpdir.rb
[ ] ├── tracer.rb
[ ] ├── tsort.rb
[ ] ├── ubygems.rb
[ ] ├── un.rb
[ ] ├── uri
[ ] │   ├── common.rb
[ ] │   ├── ftp.rb
[ ] │   ├── generic.rb
[ ] │   ├── http.rb
[ ] │   ├── https.rb
[ ] │   ├── ldap.rb
[ ] │   ├── ldaps.rb
[ ] │   └── mailto.rb
[ ] ├── uri.rb
[ ] ├── weakref.rb
[ ] ├── webrick
[ ] │   ├── accesslog.rb
[ ] │   ├── cgi.rb
[ ] │   ├── compat.rb
[ ] │   ├── config.rb
[ ] │   ├── cookie.rb
[ ] │   ├── htmlutils.rb
[ ] │   ├── httpauth
[ ] │   │   ├── authenticator.rb
[ ] │   │   ├── basicauth.rb
[ ] │   │   ├── digestauth.rb
[ ] │   │   ├── htdigest.rb
[ ] │   │   ├── htgroup.rb
[ ] │   │   ├── htpasswd.rb
[ ] │   │   └── userdb.rb
[ ] │   ├── httpauth.rb
[ ] │   ├── httpproxy.rb
[ ] │   ├── httprequest.rb
[ ] │   ├── httpresponse.rb
[ ] │   ├── https.rb
[ ] │   ├── httpserver.rb
[ ] │   ├── httpservlet
[ ] │   │   ├── abstract.rb
[ ] │   │   ├── cgi_runner.rb
[ ] │   │   ├── cgihandler.rb
[ ] │   │   ├── erbhandler.rb
[ ] │   │   ├── filehandler.rb
[ ] │   │   └── prochandler.rb
[ ] │   ├── httpservlet.rb
[ ] │   ├── httpstatus.rb
[ ] │   ├── httputils.rb
[ ] │   ├── httpversion.rb
[ ] │   ├── log.rb
[ ] │   ├── server.rb
[ ] │   ├── ssl.rb
[ ] │   ├── utils.rb
[ ] │   └── version.rb
[ ] ├── webrick.rb
[ ] ├── xmlrpc
[ ] │   ├── base64.rb
[ ] │   ├── client.rb
[ ] │   ├── config.rb
[ ] │   ├── create.rb
[ ] │   ├── datetime.rb
[ ] │   ├── httpserver.rb
[ ] │   ├── marshal.rb
[ ] │   ├── parser.rb
[ ] │   ├── server.rb
[ ] │   └── utils.rb
[ ] ├── yaml
[ ] │   ├── dbm.rb
[ ] │   ├── store.rb
[ ] │   └── syck.rb
[ ] └── yaml.rb
</code></pre>


  </div>
</article>
<nav id="related">
  <div class="related_left">
    <h3>Recent Posts</h3>
    <ul class="posts small">
      
      <li><span>24 Mar 2013</span> &raquo; <a href="/2013/03/how-i-finished-the-dbclass-from-stanford-with-full-score/">How I Finished the DBClass from Stanford with Full Score</a></li>
      
      <li><span>03 Jan 2013</span> &raquo; <a href="/2013/01/annual-review-2012/">Annual Review for 2012</a></li>
      
      <li><span>02 Sep 2012</span> &raquo; <a href="/2012/09/ack-a-better-way-to-search-in-files/">Ack - a better way to search in files</a></li>
      
    </ul>
  </div>
</nav>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'yangchenyunblog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


    </div>
    <br class="clear">
    <footer>
      <p>Powered by <a title="Don't worry, it's not the morally ambivalent doctor." href="http://github.com/mojombo/jekyll">Jekyll</a>.<span class="copyright">copyright 2011-2012&copy; <a href="//github.com/yangchenyun">Steven Yang</a></span></p>
      <!-- <p>Also find me on <a href="http://stackoverflow.com/users/966437/steven-yang">stackoverflow</a> and <a href="http://delicious.com/chenyunyang">delicious</a>.</p> -->
    </footer>
  </div>
</body>

<!-- Add this script -->
<script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f01c8a46f097959"></script>
<!-- Google Analytics Improved Version -->
<script>var _gaq=[['_setAccount','UA-27986795-1'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))
</script>
  <!-- Prompt IE 6 users to install Chrome Frame. Remove this if you want to support IE 6.
       chromium.org/developers/how-tos/chrome-frame-getting-started -->
  <!--[if lt IE 7 ]>
    <script defer src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
    <script defer>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
  <![endif]-->
</html>
